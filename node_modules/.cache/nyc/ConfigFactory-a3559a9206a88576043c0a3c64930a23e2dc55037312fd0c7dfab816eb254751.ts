"use strict";function cov_22if02kb7i(){var path="/Users/shaunegan/dev/hotloop.io/deployment-action/src/ConfigFactory.ts";var hash="5158bce24edc4de36fd65c54c5550bce91193353";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/shaunegan/dev/hotloop.io/deployment-action/src/ConfigFactory.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:31}},"2":{start:{line:4,column:18},end:{line:4,column:71}},"3":{start:{line:4,column:35},end:{line:4,column:69}},"4":{start:{line:5,column:35},end:{line:45,column:3}},"5":{start:{line:8,column:4},end:{line:43,column:6}},"6":{start:{line:9,column:19},end:{line:9,column:37}},"7":{start:{line:10,column:18},end:{line:10,column:46}},"8":{start:{line:11,column:22},end:{line:11,column:46}},"9":{start:{line:12,column:26},end:{line:12,column:54}},"10":{start:{line:13,column:22},end:{line:13,column:79}},"11":{start:{line:14,column:27},end:{line:14,column:85}},"12":{start:{line:15,column:25},end:{line:15,column:44}},"13":{start:{line:16,column:24},end:{line:16,column:111}},"14":{start:{line:17,column:22},end:{line:17,column:105}},"15":{start:{line:18,column:22},end:{line:18,column:43}},"16":{start:{line:19,column:8},end:{line:20,column:45}},"17":{start:{line:20,column:12},end:{line:20,column:45}},"18":{start:{line:21,column:8},end:{line:22,column:54}},"19":{start:{line:22,column:12},end:{line:22,column:54}},"20":{start:{line:23,column:8},end:{line:24,column:50}},"21":{start:{line:24,column:12},end:{line:24,column:50}},"22":{start:{line:25,column:8},end:{line:26,column:47}},"23":{start:{line:26,column:12},end:{line:26,column:47}},"24":{start:{line:27,column:8},end:{line:28,column:51}},"25":{start:{line:28,column:12},end:{line:28,column:51}},"26":{start:{line:29,column:8},end:{line:42,column:10}},"27":{start:{line:44,column:4},end:{line:44,column:25}},"28":{start:{line:46,column:0},end:{line:46,column:38}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:18},end:{line:4,column:19}},loc:{start:{line:4,column:33},end:{line:4,column:71}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:5,column:35},end:{line:5,column:36}},loc:{start:{line:5,column:47},end:{line:45,column:1}},line:5},"2":{name:"ConfigFactory",decl:{start:{line:6,column:13},end:{line:6,column:26}},loc:{start:{line:6,column:29},end:{line:7,column:5}},line:6},"3":{name:"(anonymous_3)",decl:{start:{line:8,column:24},end:{line:8,column:25}},loc:{start:{line:8,column:58},end:{line:43,column:5}},line:8}},branchMap:{"0":{loc:{start:{line:4,column:42},end:{line:4,column:68}},type:"binary-expr",locations:[{start:{line:4,column:42},end:{line:4,column:54}},{start:{line:4,column:58},end:{line:4,column:68}}],line:4},"1":{loc:{start:{line:13,column:22},end:{line:13,column:79}},type:"cond-expr",locations:[{start:{line:13,column:43},end:{line:13,column:72}},{start:{line:13,column:75},end:{line:13,column:79}}],line:13},"2":{loc:{start:{line:14,column:27},end:{line:14,column:85}},type:"binary-expr",locations:[{start:{line:14,column:27},end:{line:14,column:48}},{start:{line:14,column:52},end:{line:14,column:85}}],line:14},"3":{loc:{start:{line:16,column:24},end:{line:16,column:111}},type:"cond-expr",locations:[{start:{line:16,column:39},end:{line:16,column:88}},{start:{line:16,column:91},end:{line:16,column:111}}],line:16},"4":{loc:{start:{line:17,column:22},end:{line:17,column:105}},type:"cond-expr",locations:[{start:{line:17,column:35},end:{line:17,column:82}},{start:{line:17,column:85},end:{line:17,column:105}}],line:17},"5":{loc:{start:{line:19,column:8},end:{line:20,column:45}},type:"if",locations:[{start:{line:19,column:8},end:{line:20,column:45}},{start:{line:19,column:8},end:{line:20,column:45}}],line:19},"6":{loc:{start:{line:21,column:8},end:{line:22,column:54}},type:"if",locations:[{start:{line:21,column:8},end:{line:22,column:54}},{start:{line:21,column:8},end:{line:22,column:54}}],line:21},"7":{loc:{start:{line:21,column:12},end:{line:21,column:63}},type:"binary-expr",locations:[{start:{line:21,column:12},end:{line:21,column:31}},{start:{line:21,column:35},end:{line:21,column:63}}],line:21},"8":{loc:{start:{line:23,column:8},end:{line:24,column:50}},type:"if",locations:[{start:{line:23,column:8},end:{line:24,column:50}},{start:{line:23,column:8},end:{line:24,column:50}}],line:23},"9":{loc:{start:{line:25,column:8},end:{line:26,column:47}},type:"if",locations:[{start:{line:25,column:8},end:{line:26,column:47}},{start:{line:25,column:8},end:{line:26,column:47}}],line:25},"10":{loc:{start:{line:27,column:8},end:{line:28,column:51}},type:"if",locations:[{start:{line:27,column:8},end:{line:28,column:51}},{start:{line:27,column:8},end:{line:28,column:51}}],line:27},"11":{loc:{start:{line:33,column:24},end:{line:33,column:101}},type:"cond-expr",locations:[{start:{line:33,column:47},end:{line:33,column:76}},{start:{line:33,column:79},end:{line:33,column:101}}],line:33}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},inputSourceMap:{version:3,file:"/Users/shaunegan/dev/hotloop.io/deployment-action/src/ConfigFactory.ts",sources:["/Users/shaunegan/dev/hotloop.io/deployment-action/src/ConfigFactory.ts"],names:[],mappings:";;;AAWA,IAAM,WAAW,GAAG,UAAC,GAAW,IAAK,OAAA,GAAG,KAAK,IAAI,IAAI,GAAG,KAAK,EAAE,EAA1B,CAA0B,CAAA;AAE/D;IAAA;IAoCA,CAAC;IAnCe,iBAAG,GAAjB,UAAmB,OAAsB,EAAE,aAAsB;QAC/D,IAAM,IAAI,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAA;QAC/B,IAAM,GAAG,GAAW,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,CAAA;QAChD,IAAM,OAAO,GAAW,OAAO,CAAC,SAAS,EAAE,IAAI,CAAC,CAAA;QAChD,IAAM,WAAW,GAAW,OAAO,CAAC,aAAa,EAAE,IAAI,CAAC,CAAA;QACxD,IAAM,OAAO,GAAY,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,MAAM,CAAC,CAAC,CAAC,IAAI,CAAA;QAClF,IAAM,YAAY,GAAuB,OAAO,CAAC,YAAY,CAAC,IAAI,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAA;QACnG,IAAM,UAAU,GAAW,OAAO,CAAC,UAAU,CAAC,CAAA;QAE9C,IAAM,SAAS,GAAW,YAAY,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAA;QACjH,IAAM,OAAO,GAAW,UAAU,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAA;QAE3G,IAAM,OAAO,GAAmB,aAAa,CAAC,OAAO,CAAA;QAErD,IAAI,WAAW,CAAC,GAAG,CAAC;YAAE,MAAM,IAAI,KAAK,CAAC,eAAe,CAAC,CAAA;QACtD,IAAI,CAAC,OAAO,CAAC,UAAU,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ;YAAE,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC,CAAA;QAClG,IAAI,WAAW,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC;YAAE,MAAM,IAAI,KAAK,CAAC,oBAAoB,CAAC,CAAA;QACnF,IAAI,WAAW,CAAC,OAAO,CAAC;YAAE,MAAM,IAAI,KAAK,CAAC,iBAAiB,CAAC,CAAA;QAC5D,IAAI,WAAW,CAAC,WAAW,CAAC;YAAE,MAAM,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAA;QAEpE,OAAO;YACL,GAAG,KAAA;YACH,OAAO,EAAE;gBACP,UAAU,EAAE,OAAO,CAAC,UAAU,CAAC,QAAQ;gBACvC,MAAM,EAAE,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC;gBACrF,UAAU,EAAE;oBACV,OAAO,SAAA;oBACP,WAAW,aAAA;oBACX,OAAO,SAAA;oBACP,SAAS,WAAA;oBACT,OAAO,SAAA;iBACR;aACF;SACF,CAAA;IACH,CAAC;IACH,oBAAC;AAAD,CAAC,AApCD,IAoCC;AAEQ,sCAAa",sourcesContent:["import { InputOptions } from '@actions/core'\nimport { Context } from '@actions/github/lib/context'\nimport { WebhookPayload } from '@actions/github/lib/interfaces'\nimport { SyncDeploymentOptions } from '@hotloop/hotloop-sdk'\n\ninterface Config {\n  key: string,\n  options: SyncDeploymentOptions\n}\n\ntype InputFunction = (name: string, options?: InputOptions) => string\nconst nullOrEmpty = (val: String) => val === null || val === ''\n\nclass ConfigFactory {\n  public static get (inputFn: InputFunction, githubContext: Context): Config {\n    const opts = { required: true }\n    const key: string = inputFn('hotloop-key', opts)\n    const service: string = inputFn('service', opts)\n    const environment: string = inputFn('environment', opts)\n    const success: boolean = inputFn('success') ? inputFn('success') === 'true' : true\n    const startedAtEnv: string | undefined = inputFn('started-at') || process.env['HOTLOOP_START_TIME']\n    const endedAtEnv: string = inputFn('ended-at')\n\n    const startedAt: number = startedAtEnv ? new Date(parseInt(startedAtEnv) * 1000).getTime() : new Date().getTime()\n    const endedAt: number = endedAtEnv ? new Date(parseInt(endedAtEnv) * 1000).getTime() : new Date().getTime()\n\n    const context: WebhookPayload = githubContext.payload\n\n    if (nullOrEmpty(key)) throw new Error('Invalid token')\n    if (!context.repository || !context.repository.html_url) throw new Error('invalid github context')\n    if (nullOrEmpty(context.repository.html_url)) throw new Error('Invalid repository')\n    if (nullOrEmpty(service)) throw new Error('Invalid service')\n    if (nullOrEmpty(environment)) throw new Error('Invalid environment')\n\n    return {\n      key,\n      options: {\n        repository: context.repository.html_url,\n        branch: context.pull_request ? context.pull_request.head.ref : context.ref.substr(11),\n        deployment: {\n          service,\n          environment,\n          success,\n          startedAt,\n          endedAt\n        }\n      }\n    }\n  }\n}\n\nexport { ConfigFactory, Config }\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"5158bce24edc4de36fd65c54c5550bce91193353"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_22if02kb7i=function(){return actualCoverage;};}return actualCoverage;}cov_22if02kb7i();cov_22if02kb7i().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_22if02kb7i().s[1]++;exports.ConfigFactory=void 0;cov_22if02kb7i().s[2]++;var nullOrEmpty=function(val){cov_22if02kb7i().f[0]++;cov_22if02kb7i().s[3]++;return(cov_22if02kb7i().b[0][0]++,val===null)||(cov_22if02kb7i().b[0][1]++,val==='');};var ConfigFactory=(/** @class */cov_22if02kb7i().s[4]++,function(){cov_22if02kb7i().f[1]++;function ConfigFactory(){cov_22if02kb7i().f[2]++;}cov_22if02kb7i().s[5]++;ConfigFactory.get=function(inputFn,githubContext){cov_22if02kb7i().f[3]++;var opts=(cov_22if02kb7i().s[6]++,{required:true});var key=(cov_22if02kb7i().s[7]++,inputFn('hotloop-key',opts));var service=(cov_22if02kb7i().s[8]++,inputFn('service',opts));var environment=(cov_22if02kb7i().s[9]++,inputFn('environment',opts));var success=(cov_22if02kb7i().s[10]++,inputFn('success')?(cov_22if02kb7i().b[1][0]++,inputFn('success')==='true'):(cov_22if02kb7i().b[1][1]++,true));var startedAtEnv=(cov_22if02kb7i().s[11]++,(cov_22if02kb7i().b[2][0]++,inputFn('started-at'))||(cov_22if02kb7i().b[2][1]++,process.env['HOTLOOP_START_TIME']));var endedAtEnv=(cov_22if02kb7i().s[12]++,inputFn('ended-at'));var startedAt=(cov_22if02kb7i().s[13]++,startedAtEnv?(cov_22if02kb7i().b[3][0]++,new Date(parseInt(startedAtEnv)*1000).getTime()):(cov_22if02kb7i().b[3][1]++,new Date().getTime()));var endedAt=(cov_22if02kb7i().s[14]++,endedAtEnv?(cov_22if02kb7i().b[4][0]++,new Date(parseInt(endedAtEnv)*1000).getTime()):(cov_22if02kb7i().b[4][1]++,new Date().getTime()));var context=(cov_22if02kb7i().s[15]++,githubContext.payload);cov_22if02kb7i().s[16]++;if(nullOrEmpty(key)){cov_22if02kb7i().b[5][0]++;cov_22if02kb7i().s[17]++;throw new Error('Invalid token');}else{cov_22if02kb7i().b[5][1]++;}cov_22if02kb7i().s[18]++;if((cov_22if02kb7i().b[7][0]++,!context.repository)||(cov_22if02kb7i().b[7][1]++,!context.repository.html_url)){cov_22if02kb7i().b[6][0]++;cov_22if02kb7i().s[19]++;throw new Error('invalid github context');}else{cov_22if02kb7i().b[6][1]++;}cov_22if02kb7i().s[20]++;if(nullOrEmpty(context.repository.html_url)){cov_22if02kb7i().b[8][0]++;cov_22if02kb7i().s[21]++;throw new Error('Invalid repository');}else{cov_22if02kb7i().b[8][1]++;}cov_22if02kb7i().s[22]++;if(nullOrEmpty(service)){cov_22if02kb7i().b[9][0]++;cov_22if02kb7i().s[23]++;throw new Error('Invalid service');}else{cov_22if02kb7i().b[9][1]++;}cov_22if02kb7i().s[24]++;if(nullOrEmpty(environment)){cov_22if02kb7i().b[10][0]++;cov_22if02kb7i().s[25]++;throw new Error('Invalid environment');}else{cov_22if02kb7i().b[10][1]++;}cov_22if02kb7i().s[26]++;return{key:key,options:{repository:context.repository.html_url,branch:context.pull_request?(cov_22if02kb7i().b[11][0]++,context.pull_request.head.ref):(cov_22if02kb7i().b[11][1]++,context.ref.substr(11)),deployment:{service:service,environment:environment,success:success,startedAt:startedAt,endedAt:endedAt}}};};cov_22if02kb7i().s[27]++;return ConfigFactory;}());cov_22if02kb7i().s[28]++;exports.ConfigFactory=ConfigFactory;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3NoYXVuZWdhbi9kZXYvaG90bG9vcC5pby9kZXBsb3ltZW50LWFjdGlvbi9zcmMvQ29uZmlnRmFjdG9yeS50cyIsInNvdXJjZXMiOlsiL1VzZXJzL3NoYXVuZWdhbi9kZXYvaG90bG9vcC5pby9kZXBsb3ltZW50LWFjdGlvbi9zcmMvQ29uZmlnRmFjdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFXQSxJQUFNLFdBQVcsR0FBRyxVQUFDLEdBQVcsSUFBSyxPQUFBLEdBQUcsS0FBSyxJQUFJLElBQUksR0FBRyxLQUFLLEVBQUUsRUFBMUIsQ0FBMEIsQ0FBQTtBQUUvRDtJQUFBO0lBb0NBLENBQUM7SUFuQ2UsaUJBQUcsR0FBakIsVUFBbUIsT0FBc0IsRUFBRSxhQUFzQjtRQUMvRCxJQUFNLElBQUksR0FBRyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQTtRQUMvQixJQUFNLEdBQUcsR0FBVyxPQUFPLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQ2hELElBQU0sT0FBTyxHQUFXLE9BQU8sQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDLENBQUE7UUFDaEQsSUFBTSxXQUFXLEdBQVcsT0FBTyxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsQ0FBQTtRQUN4RCxJQUFNLE9BQU8sR0FBWSxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQTtRQUNsRixJQUFNLFlBQVksR0FBdUIsT0FBTyxDQUFDLFlBQVksQ0FBQyxJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUMsb0JBQW9CLENBQUMsQ0FBQTtRQUNuRyxJQUFNLFVBQVUsR0FBVyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUE7UUFFOUMsSUFBTSxTQUFTLEdBQVcsWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUE7UUFDakgsSUFBTSxPQUFPLEdBQVcsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsT0FBTyxFQUFFLENBQUE7UUFFM0csSUFBTSxPQUFPLEdBQW1CLGFBQWEsQ0FBQyxPQUFPLENBQUE7UUFFckQsSUFBSSxXQUFXLENBQUMsR0FBRyxDQUFDO1lBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyxlQUFlLENBQUMsQ0FBQTtRQUN0RCxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsUUFBUTtZQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsd0JBQXdCLENBQUMsQ0FBQTtRQUNsRyxJQUFJLFdBQVcsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQztZQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsb0JBQW9CLENBQUMsQ0FBQTtRQUNuRixJQUFJLFdBQVcsQ0FBQyxPQUFPLENBQUM7WUFBRSxNQUFNLElBQUksS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUE7UUFDNUQsSUFBSSxXQUFXLENBQUMsV0FBVyxDQUFDO1lBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyxxQkFBcUIsQ0FBQyxDQUFBO1FBRXBFLE9BQU87WUFDTCxHQUFHLEtBQUE7WUFDSCxPQUFPLEVBQUU7Z0JBQ1AsVUFBVSxFQUFFLE9BQU8sQ0FBQyxVQUFVLENBQUMsUUFBUTtnQkFDdkMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDO2dCQUNyRixVQUFVLEVBQUU7b0JBQ1YsT0FBTyxTQUFBO29CQUNQLFdBQVcsYUFBQTtvQkFDWCxPQUFPLFNBQUE7b0JBQ1AsU0FBUyxXQUFBO29CQUNULE9BQU8sU0FBQTtpQkFDUjthQUNGO1NBQ0YsQ0FBQTtJQUNILENBQUM7SUFDSCxvQkFBQztBQUFELENBQUMsQUFwQ0QsSUFvQ0M7QUFFUSxzQ0FBYSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElucHV0T3B0aW9ucyB9IGZyb20gJ0BhY3Rpb25zL2NvcmUnXG5pbXBvcnQgeyBDb250ZXh0IH0gZnJvbSAnQGFjdGlvbnMvZ2l0aHViL2xpYi9jb250ZXh0J1xuaW1wb3J0IHsgV2ViaG9va1BheWxvYWQgfSBmcm9tICdAYWN0aW9ucy9naXRodWIvbGliL2ludGVyZmFjZXMnXG5pbXBvcnQgeyBTeW5jRGVwbG95bWVudE9wdGlvbnMgfSBmcm9tICdAaG90bG9vcC9ob3Rsb29wLXNkaydcblxuaW50ZXJmYWNlIENvbmZpZyB7XG4gIGtleTogc3RyaW5nLFxuICBvcHRpb25zOiBTeW5jRGVwbG95bWVudE9wdGlvbnNcbn1cblxudHlwZSBJbnB1dEZ1bmN0aW9uID0gKG5hbWU6IHN0cmluZywgb3B0aW9ucz86IElucHV0T3B0aW9ucykgPT4gc3RyaW5nXG5jb25zdCBudWxsT3JFbXB0eSA9ICh2YWw6IFN0cmluZykgPT4gdmFsID09PSBudWxsIHx8IHZhbCA9PT0gJydcblxuY2xhc3MgQ29uZmlnRmFjdG9yeSB7XG4gIHB1YmxpYyBzdGF0aWMgZ2V0IChpbnB1dEZuOiBJbnB1dEZ1bmN0aW9uLCBnaXRodWJDb250ZXh0OiBDb250ZXh0KTogQ29uZmlnIHtcbiAgICBjb25zdCBvcHRzID0geyByZXF1aXJlZDogdHJ1ZSB9XG4gICAgY29uc3Qga2V5OiBzdHJpbmcgPSBpbnB1dEZuKCdob3Rsb29wLWtleScsIG9wdHMpXG4gICAgY29uc3Qgc2VydmljZTogc3RyaW5nID0gaW5wdXRGbignc2VydmljZScsIG9wdHMpXG4gICAgY29uc3QgZW52aXJvbm1lbnQ6IHN0cmluZyA9IGlucHV0Rm4oJ2Vudmlyb25tZW50Jywgb3B0cylcbiAgICBjb25zdCBzdWNjZXNzOiBib29sZWFuID0gaW5wdXRGbignc3VjY2VzcycpID8gaW5wdXRGbignc3VjY2VzcycpID09PSAndHJ1ZScgOiB0cnVlXG4gICAgY29uc3Qgc3RhcnRlZEF0RW52OiBzdHJpbmcgfCB1bmRlZmluZWQgPSBpbnB1dEZuKCdzdGFydGVkLWF0JykgfHwgcHJvY2Vzcy5lbnZbJ0hPVExPT1BfU1RBUlRfVElNRSddXG4gICAgY29uc3QgZW5kZWRBdEVudjogc3RyaW5nID0gaW5wdXRGbignZW5kZWQtYXQnKVxuXG4gICAgY29uc3Qgc3RhcnRlZEF0OiBudW1iZXIgPSBzdGFydGVkQXRFbnYgPyBuZXcgRGF0ZShwYXJzZUludChzdGFydGVkQXRFbnYpICogMTAwMCkuZ2V0VGltZSgpIDogbmV3IERhdGUoKS5nZXRUaW1lKClcbiAgICBjb25zdCBlbmRlZEF0OiBudW1iZXIgPSBlbmRlZEF0RW52ID8gbmV3IERhdGUocGFyc2VJbnQoZW5kZWRBdEVudikgKiAxMDAwKS5nZXRUaW1lKCkgOiBuZXcgRGF0ZSgpLmdldFRpbWUoKVxuXG4gICAgY29uc3QgY29udGV4dDogV2ViaG9va1BheWxvYWQgPSBnaXRodWJDb250ZXh0LnBheWxvYWRcblxuICAgIGlmIChudWxsT3JFbXB0eShrZXkpKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdG9rZW4nKVxuICAgIGlmICghY29udGV4dC5yZXBvc2l0b3J5IHx8ICFjb250ZXh0LnJlcG9zaXRvcnkuaHRtbF91cmwpIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBnaXRodWIgY29udGV4dCcpXG4gICAgaWYgKG51bGxPckVtcHR5KGNvbnRleHQucmVwb3NpdG9yeS5odG1sX3VybCkpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZXBvc2l0b3J5JylcbiAgICBpZiAobnVsbE9yRW1wdHkoc2VydmljZSkpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzZXJ2aWNlJylcbiAgICBpZiAobnVsbE9yRW1wdHkoZW52aXJvbm1lbnQpKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZW52aXJvbm1lbnQnKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGtleSxcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgcmVwb3NpdG9yeTogY29udGV4dC5yZXBvc2l0b3J5Lmh0bWxfdXJsLFxuICAgICAgICBicmFuY2g6IGNvbnRleHQucHVsbF9yZXF1ZXN0ID8gY29udGV4dC5wdWxsX3JlcXVlc3QuaGVhZC5yZWYgOiBjb250ZXh0LnJlZi5zdWJzdHIoMTEpLFxuICAgICAgICBkZXBsb3ltZW50OiB7XG4gICAgICAgICAgc2VydmljZSxcbiAgICAgICAgICBlbnZpcm9ubWVudCxcbiAgICAgICAgICBzdWNjZXNzLFxuICAgICAgICAgIHN0YXJ0ZWRBdCxcbiAgICAgICAgICBlbmRlZEF0XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHsgQ29uZmlnRmFjdG9yeSwgQ29uZmlnIH1cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zaGF1bmVnYW4vZGV2L2hvdGxvb3AuaW8vZGVwbG95bWVudC1hY3Rpb24vc3JjL0NvbmZpZ0ZhY3RvcnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6InM3U0F1QlU7eVBBWlYsR0FBTSxDQUFBLFdBQVcsQ0FBRyxTQUFDLEdBQUQsQ0FBWSxpREFBSyxNQUFBLDRCQUFBLEdBQUcsR0FBSyxJQUFSLCtCQUFnQixHQUFHLEdBQW5CLEVBQUEsQ0FBQSxDQUEwQixDQUEvRCxDQUVBLEdBQUEsQ0FBQSxhQUFBLEVBQUEsYUFBQSx3QkFBQSxVQUFBLHlCQUFBLFFBQUEsQ0FBQSxhQUFBLEVBQUEseUJBb0NDLENBcENELHdCQUNnQixhQUFBLENBQUEsR0FBQSxDQUFkLFNBQW1CLE9BQW5CLENBQTJDLGFBQTNDLENBQWlFLHlCQUMvRCxHQUFNLENBQUEsSUFBSSwwQkFBRyxDQUFFLFFBQVEsQ0FBRSxJQUFaLENBQUgsQ0FBVixDQUNBLEdBQU0sQ0FBQSxHQUFHLDBCQUFXLE9BQU8sQ0FBQyxhQUFELENBQWdCLElBQWhCLENBQWxCLENBQVQsQ0FDQSxHQUFNLENBQUEsT0FBTywwQkFBVyxPQUFPLENBQUMsU0FBRCxDQUFZLElBQVosQ0FBbEIsQ0FBYixDQUNBLEdBQU0sQ0FBQSxXQUFXLDBCQUFXLE9BQU8sQ0FBQyxhQUFELENBQWdCLElBQWhCLENBQWxCLENBQWpCLENBQ0EsR0FBTSxDQUFBLE9BQU8sMkJBQVksT0FBTyxDQUFDLFNBQUQsQ0FBUCw2QkFBcUIsT0FBTyxDQUFDLFNBQUQsQ0FBUCxHQUF1QixNQUE1Qyw4QkFBcUQsSUFBckQsQ0FBWixDQUFiLENBQ0EsR0FBTSxDQUFBLFlBQVksMkJBQXVCLDRCQUFBLE9BQU8sQ0FBQyxZQUFELENBQVAsK0JBQXlCLE9BQU8sQ0FBQyxHQUFSLENBQVksb0JBQVosQ0FBekIsQ0FBdkIsQ0FBbEIsQ0FDQSxHQUFNLENBQUEsVUFBVSwyQkFBVyxPQUFPLENBQUMsVUFBRCxDQUFsQixDQUFoQixDQUVBLEdBQU0sQ0FBQSxTQUFTLDJCQUFXLFlBQVksNkJBQUcsR0FBSSxDQUFBLElBQUosQ0FBUyxRQUFRLENBQUMsWUFBRCxDQUFSLENBQXlCLElBQWxDLEVBQXdDLE9BQXhDLEVBQUgsOEJBQXVELEdBQUksQ0FBQSxJQUFKLEdBQVcsT0FBWCxFQUF2RCxDQUF2QixDQUFmLENBQ0EsR0FBTSxDQUFBLE9BQU8sMkJBQVcsVUFBVSw2QkFBRyxHQUFJLENBQUEsSUFBSixDQUFTLFFBQVEsQ0FBQyxVQUFELENBQVIsQ0FBdUIsSUFBaEMsRUFBc0MsT0FBdEMsRUFBSCw4QkFBcUQsR0FBSSxDQUFBLElBQUosR0FBVyxPQUFYLEVBQXJELENBQXJCLENBQWIsQ0FFQSxHQUFNLENBQUEsT0FBTywyQkFBbUIsYUFBYSxDQUFDLE9BQWpDLENBQWIsQ0FaK0QseUJBYy9ELEdBQUksV0FBVyxDQUFDLEdBQUQsQ0FBZixDQUFzQiwwREFBTSxJQUFJLENBQUEsS0FBSixDQUFVLGVBQVYsQ0FBTixDQUFnQyxDQUF0RCxpQ0FkK0QseUJBZS9ELEdBQUksNkJBQUMsT0FBTyxDQUFDLFVBQVQsK0JBQXVCLENBQUMsT0FBTyxDQUFDLFVBQVIsQ0FBbUIsUUFBM0MsQ0FBSixDQUF5RCwwREFBTSxJQUFJLENBQUEsS0FBSixDQUFVLHdCQUFWLENBQU4sQ0FBeUMsQ0FBbEcsaUNBZitELHlCQWdCL0QsR0FBSSxXQUFXLENBQUMsT0FBTyxDQUFDLFVBQVIsQ0FBbUIsUUFBcEIsQ0FBZixDQUE4QywwREFBTSxJQUFJLENBQUEsS0FBSixDQUFVLG9CQUFWLENBQU4sQ0FBcUMsQ0FBbkYsaUNBaEIrRCx5QkFpQi9ELEdBQUksV0FBVyxDQUFDLE9BQUQsQ0FBZixDQUEwQiwwREFBTSxJQUFJLENBQUEsS0FBSixDQUFVLGlCQUFWLENBQU4sQ0FBa0MsQ0FBNUQsaUNBakIrRCx5QkFrQi9ELEdBQUksV0FBVyxDQUFDLFdBQUQsQ0FBZixDQUE4QiwyREFBTSxJQUFJLENBQUEsS0FBSixDQUFVLHFCQUFWLENBQU4sQ0FBc0MsQ0FBcEUsa0NBbEIrRCx5QkFvQi9ELE1BQU8sQ0FDTCxHQUFHLENBQUEsR0FERSxDQUVMLE9BQU8sQ0FBRSxDQUNQLFVBQVUsQ0FBRSxPQUFPLENBQUMsVUFBUixDQUFtQixRQUR4QixDQUVQLE1BQU0sQ0FBRSxPQUFPLENBQUMsWUFBUiw4QkFBdUIsT0FBTyxDQUFDLFlBQVIsQ0FBcUIsSUFBckIsQ0FBMEIsR0FBakQsK0JBQXVELE9BQU8sQ0FBQyxHQUFSLENBQVksTUFBWixDQUFtQixFQUFuQixDQUF2RCxDQUZELENBR1AsVUFBVSxDQUFFLENBQ1YsT0FBTyxDQUFBLE9BREcsQ0FFVixXQUFXLENBQUEsV0FGRCxDQUdWLE9BQU8sQ0FBQSxPQUhHLENBSVYsU0FBUyxDQUFBLFNBSkMsQ0FLVixPQUFPLENBQUEsT0FMRyxDQUhMLENBRkosQ0FBUCxDQWNELENBbENhLENBRGhCLHlCQW9DQSxNQUFBLENBQUEsYUFBQSxDQUFDLENBcENELEVBQUEsQ0FBQSxDLHlCQXNDUyxPQUFBLENBQUEsYUFBQSxDQUFBLGFBQUEsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElucHV0T3B0aW9ucyB9IGZyb20gJ0BhY3Rpb25zL2NvcmUnXG5pbXBvcnQgeyBDb250ZXh0IH0gZnJvbSAnQGFjdGlvbnMvZ2l0aHViL2xpYi9jb250ZXh0J1xuaW1wb3J0IHsgV2ViaG9va1BheWxvYWQgfSBmcm9tICdAYWN0aW9ucy9naXRodWIvbGliL2ludGVyZmFjZXMnXG5pbXBvcnQgeyBTeW5jRGVwbG95bWVudE9wdGlvbnMgfSBmcm9tICdAaG90bG9vcC9ob3Rsb29wLXNkaydcblxuaW50ZXJmYWNlIENvbmZpZyB7XG4gIGtleTogc3RyaW5nLFxuICBvcHRpb25zOiBTeW5jRGVwbG95bWVudE9wdGlvbnNcbn1cblxudHlwZSBJbnB1dEZ1bmN0aW9uID0gKG5hbWU6IHN0cmluZywgb3B0aW9ucz86IElucHV0T3B0aW9ucykgPT4gc3RyaW5nXG5jb25zdCBudWxsT3JFbXB0eSA9ICh2YWw6IFN0cmluZykgPT4gdmFsID09PSBudWxsIHx8IHZhbCA9PT0gJydcblxuY2xhc3MgQ29uZmlnRmFjdG9yeSB7XG4gIHB1YmxpYyBzdGF0aWMgZ2V0IChpbnB1dEZuOiBJbnB1dEZ1bmN0aW9uLCBnaXRodWJDb250ZXh0OiBDb250ZXh0KTogQ29uZmlnIHtcbiAgICBjb25zdCBvcHRzID0geyByZXF1aXJlZDogdHJ1ZSB9XG4gICAgY29uc3Qga2V5OiBzdHJpbmcgPSBpbnB1dEZuKCdob3Rsb29wLWtleScsIG9wdHMpXG4gICAgY29uc3Qgc2VydmljZTogc3RyaW5nID0gaW5wdXRGbignc2VydmljZScsIG9wdHMpXG4gICAgY29uc3QgZW52aXJvbm1lbnQ6IHN0cmluZyA9IGlucHV0Rm4oJ2Vudmlyb25tZW50Jywgb3B0cylcbiAgICBjb25zdCBzdWNjZXNzOiBib29sZWFuID0gaW5wdXRGbignc3VjY2VzcycpID8gaW5wdXRGbignc3VjY2VzcycpID09PSAndHJ1ZScgOiB0cnVlXG4gICAgY29uc3Qgc3RhcnRlZEF0RW52OiBzdHJpbmcgfCB1bmRlZmluZWQgPSBpbnB1dEZuKCdzdGFydGVkLWF0JykgfHwgcHJvY2Vzcy5lbnZbJ0hPVExPT1BfU1RBUlRfVElNRSddXG4gICAgY29uc3QgZW5kZWRBdEVudjogc3RyaW5nID0gaW5wdXRGbignZW5kZWQtYXQnKVxuXG4gICAgY29uc3Qgc3RhcnRlZEF0OiBudW1iZXIgPSBzdGFydGVkQXRFbnYgPyBuZXcgRGF0ZShwYXJzZUludChzdGFydGVkQXRFbnYpICogMTAwMCkuZ2V0VGltZSgpIDogbmV3IERhdGUoKS5nZXRUaW1lKClcbiAgICBjb25zdCBlbmRlZEF0OiBudW1iZXIgPSBlbmRlZEF0RW52ID8gbmV3IERhdGUocGFyc2VJbnQoZW5kZWRBdEVudikgKiAxMDAwKS5nZXRUaW1lKCkgOiBuZXcgRGF0ZSgpLmdldFRpbWUoKVxuXG4gICAgY29uc3QgY29udGV4dDogV2ViaG9va1BheWxvYWQgPSBnaXRodWJDb250ZXh0LnBheWxvYWRcblxuICAgIGlmIChudWxsT3JFbXB0eShrZXkpKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdG9rZW4nKVxuICAgIGlmICghY29udGV4dC5yZXBvc2l0b3J5IHx8ICFjb250ZXh0LnJlcG9zaXRvcnkuaHRtbF91cmwpIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBnaXRodWIgY29udGV4dCcpXG4gICAgaWYgKG51bGxPckVtcHR5KGNvbnRleHQucmVwb3NpdG9yeS5odG1sX3VybCkpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByZXBvc2l0b3J5JylcbiAgICBpZiAobnVsbE9yRW1wdHkoc2VydmljZSkpIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzZXJ2aWNlJylcbiAgICBpZiAobnVsbE9yRW1wdHkoZW52aXJvbm1lbnQpKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZW52aXJvbm1lbnQnKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGtleSxcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgcmVwb3NpdG9yeTogY29udGV4dC5yZXBvc2l0b3J5Lmh0bWxfdXJsLFxuICAgICAgICBicmFuY2g6IGNvbnRleHQucHVsbF9yZXF1ZXN0ID8gY29udGV4dC5wdWxsX3JlcXVlc3QuaGVhZC5yZWYgOiBjb250ZXh0LnJlZi5zdWJzdHIoMTEpLFxuICAgICAgICBkZXBsb3ltZW50OiB7XG4gICAgICAgICAgc2VydmljZSxcbiAgICAgICAgICBlbnZpcm9ubWVudCxcbiAgICAgICAgICBzdWNjZXNzLFxuICAgICAgICAgIHN0YXJ0ZWRBdCxcbiAgICAgICAgICBlbmRlZEF0XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IHsgQ29uZmlnRmFjdG9yeSwgQ29uZmlnIH1cbiJdfQ==